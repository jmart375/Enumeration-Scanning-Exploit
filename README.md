![images](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/af4be6fd-16e1-4611-9df7-517a1a9b999c)
# Penetration Test – Enumeration, Scanning, Exploit

## Table of Contents
1. [Executive Summary](#executive-summary)
   1. [Findings](#findings)
   2. [Importance of Continuous Monitoring](#continuous-monitoring)
2. [Enumeration](#enumeration)
   1. [Verify Setup](#verify-setup)
   2. [Host Discovery](#host-discovery)
   3. [TCP Port Scanning](#tcp-port-scanning)
   4. [UDP Port Scanning](#udp-port-scanning)
   5. [OS Detection](#os-detection)
   6. [TCP Version and Service Scanning](#tcp-version-and-service-scanning)
   7. [Kitchen Sink Scan](#kitchen-sink-scan)
3. [Scanning](#scanning)
   1. [Nessus External Scan](#nessus-external-scan)
   2. [Scanning Deliverables](#scanning-deliverables)
4. [Exploitation](#exploitation)
   1. [Setup](#setup)
   2. [Exploiting VSFTPD](#exploiting-vsftpd)
   3. [Steal the Passwords](#steal-the-passwords)
   4. [Crack the Passwords](#crack-the-passwords)

## Executive Summary
### Findings
The penetration test on Metasploitable 2 aimed to demonstrate, identify, and exploit vulnerabilities. The report guides through the steps of environment validation, enumeration, scanning, and exploitation, concluding with recommended changes based on Nessus scanner results.

### Importance of Continuous Monitoring
Continuous monitoring and keeping applications up-to-date are crucial for reducing the attack surface.

## Enumeration
### Verify Setup
- **IP Addresses:**
  - What is the IP address of the Kali VM, and what is the IP address of the Metasploitable2 VM?
  - The following command was used to collect this information “IP a” 
  - Kali VM: 192.168.182.132/24
  - Metasploitable2 VM: 192.168.182.131/24 (DHCP leases)

### Host Discovery
•	The following command is used to find the host through Nmap “sudo Nmap -sn 192.168.182.0/24.”
•	What hosts did Nmap find in the scan?
o	It found five hosts, two of them were our Kali box and our metassploitable 2. Please refer to the picture below.
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/9dc0f318-e12f-4186-a375-4cbbafd7c6e4)

### TCP Port Scanning
•	The following command is used to find the host through Nmap “sudo Nmap -sT 192.168.182.131.”
•	What TCP ports and services did Nmap find open on the Metasploitable2 VM?
o	The TCP ports opened are listed in the picture below.
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/1e35660a-3bd5-49b0-9a29-c078835ab208)


### UDP Port Scanning
•	The following command is used to find the host through Nmap “sudo Nmap -T5 --top-ports=128 -sU -sV 192.168.182.131 -v” 
•	What open ports (not “open|filtered”) did each scan find? What services and software versions were listening on those ports? How much faster is the T5 scan compared to the T3 scan? Did the T3 scan find services that the T5 scan didn’t see or vice versa? Run both scans a second time. Are the results the same as the first time? If there are any differences between the scan results, what do you think caused that?
•	The open ports are listed in the picture below.
•	The T5 scan for the first run had a latency of 0.00062s; the second run was 0.00056s. The T3 scan’s first run was 0.00063s, and the second run of 0.00060s. So overall, the second run was faster but compared to T5 and T3, T3 was faster overall both run times were shorter.
•	Yes, the T5 and T3 scans had similar but different ports.
•	The results differed in latency, and the overall time it took to complete, where T5 was faster than T3 in latency, but T3 finished faster than T5.
•	The two scan results differed in the number of ports listed, so T3 finished faster than T5.
•	First Run
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/55ec42b3-8f9d-4f7e-925c-9065c7031095)

•	Second Run
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/0b2c0a4c-8abc-4462-940b-1bca0da6a0cb)
•	The following command is used to find the host through Nmap “sudo Nmap -T3 --top-ports=128 -sU -sV 192.168.182.131 -v”
•	First Run (-v: Increase verbosity level) 
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/fba80b6c-dc05-4989-a5fd-7ef6d54c134a)
•	Second Run
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/113013fd-8ea9-43c8-863b-e4961927fe09)

### OS Detection
•	The following command is used to find the host through Nmap “sudo Nmap -O 192.168.182.131.”
•	What is the information that Nmap discovers, including the “Device type,” the “OS CPE” (common platform enumeration), and the “OS details”? 
Upon running the command, it was shown Device Type: general purpose, OS CPE: /		o:Linux:linux_kernel:2.6 and the OS details are Linux 2.6.9 - 2.6.33. An illustration is provided below.
•	What is the range of possible kernel versions that Nmap thinks is running on the target host?
The range of possible kernel versions was determined to be anywhere from 2.6.9 - 2.6.33.
•	 What version of Linux is the target system running (on the Metasploitable2 VM, run the “uname -a” command)?
•	When we ran the command (uname -a), the Kali Linux 5.18.0-kali5-amd64 #1 SMP PREEMPT_DYNAMIC Debian 5.18.5-1kali6 (2022-07-07) x86_64 GNU/Linux

![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/0a2b0c28-b927-4a73-9920-3e51079570c3)

### TCP Version and Service Scanning
•	What version of OpenSSH is running?
Once we ran the appropriate command, which scanned for the TCP services, we discovered  	OpenSSH 4.7p1 Debian 8ubuntu1 (protocol 2.0). The image below shows the results.
•	What version of the FTP server is running?
The FTP was found to be vsftpd 2.3.4. 
•	Op
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/df25df04-854f-48f2-9167-9dea2ed3d260)

### Kitchen Sink Scan
•	What is the target host's unique 2048-bit RSA SSH host key? = 
After running an “All” scan against the target, it gave us the unique 2048-bit RSA SSH host key, as indicated in the image below.
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/1341d926-a11a-4631-a21c-67454aa07db2)
•	What is the “security type” for VNC authentication? = 
The “security type” for VNC authentication is protocol version 3.3, and the security types are 	 VNC authentication (2), as illustrated in the image below.
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/d16acbb8-40b6-4ada-bda3-294a8b6c83b1)


## Scanning
### Nessus External Scan
How many vulnerabilities did Nessus flag as critical, high, and medium? What are the suggested remediations?
The Nessus report scan identified a total of 187 vulnerabilities. A breakdown of each vulnerability is illustrated below: 14 Critical, 7 High, 22 Medium, 5 Low, and 134 Info. Some of the suggested remediations include updating, installing, regenerating, and contacting the vendor for a patch.
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/6944eead-0f5b-46be-be14-6dce120b1a5e)

### Scanning Deliverables
- See attached "2_2_Nessus_External_Scan_bqqkak" report.

## Exploitation
### Setup
- **FTP Servers:**
•	What are the two FTP servers, and what version are they?
•	The two versions of the FTP are the following. We identified the two versions using the “services” command under the MSF6 prompt. See the image below. 
•	192.168.182.131  21    tcp    ftp          open   vsftpd 2.3.4
•	192.168.182.131  2121  tcp    ftp          open   ProFTPD 1.3.1

![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/0e494929-aa4e-40fe-a224-c3219170ac6e)

### Exploiting VSFTPD
•	What was the exploit that was found? 
o	The exploit that was found was vsftpd_234_backdoor (VSFTPD v2.3.4 Backdoor Command Execution) 
•	What is its full path name?
o	The fill path for the exploit is exploit/unix/ftp/vsftpd_234_backdoor
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/af6631be-0c39-4e4f-917d-d447b0b6a4fe)
•	What is the OSVDB number?
o	The OSVDB number we identified was (73573), pictured below. 
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/c8372761-4933-4db1-8506-c09378eb4c2f)
•	What is the user you are running as on the target
o	The user we were running on the target was the root account, pictured below. 
•	what is the version of the Linux kernel?
o	The version collected using the “uname -a” command was Linux metasploitable 2.6.24-16-server #1 SMP Thu Apr 10 13:58:00 UTC 2008 i686 GNU/Linux, pictured below.
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/7f4bf766-4e2f-417c-b201-4932959039f1)
•	Include the lines containing the password hashes in your report. 
o	root:$1$/avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.:14747:0:99999:7:::
o	sys:$1$fUX6BPOt$Miyc3UpOzQJqz4s5wFD9l0:14742:0:99999:7:::
o	klog:$1$f2ZVMS4K$R9XkI.CmLdHhdUE3X9jqP0:14742:0:99999:7:::
o	msfadmin:$1$XN10Zj2c$Rt/zzCW3mLtUWA.ihZjA5/:14684:0:99999:7:::
o	postgres:$1$Rw35ik.x$MgQgZUuO5pAoUvfJhfcYe/:14685:0:99999:7:::
o	user:$1$HESu9xrH$k.o3G93DGoXIiQKkPmUgZ0:14699:0:99999:7:::
o	service:$1$kR3ue7JZ$7GxELDupr5Ohp6cjZ3Bu//:14715:0:99999:7:::
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/10f1f9d1-d767-4fbe-9d6c-92a56f791fcf)


### Steal the Passwords
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/9fc75308-caa9-4c9f-a761-8ca7df7c24ca)

![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/12eec7b4-5e38-483d-963e-951032922ba7)

### Crack the Passwords
•	How many passwords was john able to crack using the wordlist? 
o	John was able to crack three passwords using the default word list at wordlist=/usr/share/john/password.lst
•	What are the account names and the cracked passwords?
o	Below is a list of the three account passwords and associated user names, pictured below. 
o	123456789        (klog)
o	batman           (sys)
o	service          (service)
![image](https://github.com/jmart375/Enumeration-Scanning-Exploit/assets/91294710/4da94039-ee41-4614-85a0-500a8c7b13ac)


